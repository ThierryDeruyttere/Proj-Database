{% extends "codegalaxy.html" %}

{% block base_body %}
{% load staticfiles %}


  <script src="{% static "codemirror/lib/codemirror.js" %}"></script>
  <link rel="stylesheet" href="{% static "codemirror/lib/codemirror.css" %}">
  <script src="{% static "codemirror/mode/python/python.js" %}"></script>
  <link rel="stylesheet" href="{% static "codemirror/theme/monokai.css" %}">

  <div class="row">
    <div class="large-12 columns">
      <div class="panel">
        <div class="row">
          <h3>Question</h3>
          <hr>
        </div>

        <div class="row">
          <div class="large-6 columns">
            {{ exercise.question }}
            <hr>
          </div>
        </div>

        <form method="post" action="{{ exercise.id }}/submit">
          {% csrf_token %}
          <div class="row" id="Open Question" hidden="True">

            {% for i in answers %}
              <div class="row">
                <div class="large-6 large-offset-1 columns">
                  {{ forloop.counter }}
                  {{ i }}
                  {% if forloop.counter == 1  %}
                    <input type="radio" name="corr_answer" value="{{ forloop.counter }}" id="corr_answer_no_{{ forloop.counter }}" checked><label for="answer_no_{{ forloop.counter }}">Correct answer</label>
                  {% else %}
                    <input type="radio" name="corr_answer" value="{{ forloop.counter }}" id="corr_answer_no_{{ forloop.counter }}" ><label for="answer_no_{{ forloop.counter }}">Correct answer</label>
                  {% endif %}
                </div>
              </div>
            {% endfor %}
          </div>

          <div class="row" id="Code" hidden="True">

            <textarea id="code" name="code">
                {{ exercise.code }}
            </textarea>
            <script>
              var myCodeMirror = CodeMirror.fromTextArea(code,
                      {
                        lineNumbers: true,
                        mode: "python",
                        theme: "monokai"
                      });
            </script>
          </div>

          <script>
            function unhide(name){
              document.getElementById(name).hidden = false
            }
          </script>

          {% if exercise.exercise_type == "Open Question" %}
            <script>
              unhide("Open Question")
            </script>
          {% else %}
            <script>
              unhide("Code")
            </script>
          {% endif %}

          <div class="row">
            <div class="large-text-center">
              <input type="submit" name="submit" class="button tiny radius" value="Answer">
            </div>
          </div>
        </form>


      </div>
    </div>
  </div>

{% endblock base_body %}
